#lightbox {

	position: fixed;
	top: 0;
	left: 0;

	width: 100%;
	height: 100%;

	background-color: white;
	z-index: 5;

	// main.js will hide body's overflow
	overflow-y: hidden;

	// main.js will show the lightbox
	pointer-events: none;
	opacity: 0;
	transform: scale(0);

	// Toggle when the lightbox is opened
	&.opened {
		pointer-events: auto;
		opacity: 1;
		transform: scale(1);

		display: flex;
		align-items: center;
		flex-direction: column;
		justify-content: space-between;
	}

	.btn-close {

		position: fixed;
		top: 10px;
		right: 10px;

		line-height: 1;

		z-index: 1;

	}

	#viewer {
		align-self: stretch;
		height: 100%;
	}

	#content {

		overflow-y: scroll;

		@include font-copy();

		display: flex;
		flex-direction: column;
		justify-content: flex-end;

		padding: 0.75em;

		// Override this for desktop
		position: absolute;
		bottom: 0;
		left: 0;

		background: linear-gradient(to top, white 2.25em, rgba(255, 255, 255, 0.7) );
		width: 100%;

		// Bottom part of tombstone
		// Technically targets all p
		// Overriden by more specific directives
		p {
			font-size: 0.85em;
			margin: 0;

			// For "reveal" on show more
			transition: max-height 0.3s ease-out, margin 0.3s ease-out;
			overflow: hidden;
			max-height: 0;
		}


		// Top part of tombstone
		> p:first-of-type {
			font-size: 0.85em;
		}

		// Title of the artwork
		h1 {
			@include font-heading();
			font-size: 1em;
			line-height: 1.25;

			// Mid-line separation...
			margin-bottom: 0.75em;
		}

		// Curatorial description
		blockquote {

			p {
				font-size: 0.75em;
				margin: 0;

				// Hide all non-first paragraphs
				// For multi-paragraph descriptions
				max-height: 0em;
			}

			p:first-of-type {

				// Show only the first 2 lines
				// Based on line-height: 1.5em
				max-height: 3em;

			}

			// Alas, this doesn't work:
			// word-wrap: break-word;
			// text-overflow: ellipsis;

		}

		// See in our Collection
		a.collection {
			text-decoration: underline;
			color: #03568B;
			font-size: 1.2em;
		}


		// Hide me on non-mobile!
		// Match settings to `blockquote p`
		.btn-expand {

			// Tapping anywhere on the bottom thingy will expand!
			position: absolute;
			bottom: 0;
			right: 0;

			width: 100%;
			height: 100%;

			font-size: 0.75em;

			text-decoration: underline;
			color: #03568B;

			// Position "Read More" to bottom-right
			span, &:after {
				position: absolute;
				bottom: 1.075em;
			}

			// Position "Read More" above the fade-out
			span {
				right: 2em;
				z-index: 1;
				white-space: nowrap;
			}

			// Used to fade out underlying text
			&:after {
				content: "";
				right: 0em;

				height: 1.5em;
				width: 75%;

				background: linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1) 50%);
				pointer-events: none;
			}

			&.btn-show {
				visibility: visible;
			}

			&.btn-hide {
				visibility: hidden;
			}

		}

	}

	// Show the hidden elements...
	&.expanded {

		#content {

			height: 100%;

			p {

				// Determines how long it takes for the lightbox to expand!
				// Has interesting interactions w/ max-height proportion to actual height
				$curve: cubic-bezier(0, 0.2, 1, 0);
				$time: 0.25s;

				transition: max-height #{$time} #{$curve}, margin #{$time} #{$curve};

				max-height: 20em;
				margin-bottom: 0.75em;

			}

			// Special margins for the Collections link
			> p:last-of-type {
				margin-bottom: 1.65em;
			}

			blockquote {
				margin: 0;


				p:first-of-type {
					max-height: initial;
				}

			}

			h1 {
				margin-top: 0.75em;
			}

			a.collection {
				position: relative;
				z-index: 10;
			}

			.btn-expand {

				width: auto;
				height: auto;

				&.btn-hide {
					visibility: visible;
				}

				&.btn-show {
					visibility: hidden;
				}

			}

			.btn-expand-invisible {
				flex-grow: 1;
			}

			> * {
				flex-shrink: 0;
			}

		}

		.btn-close {
			visibility: hidden;
		}

	}

	@media #{$mq-smallish} {

		&.opened {
			flex-direction: row;
		}

		#viewer {
			height: 100%;
			width: 66%;
		}

		#content {

			position: relative;
			width: 40%;
			margin: 0;
			padding: 0 1em;

			// Undo all of the "hide" stuff
			background: none;

			.btn-expand-invisible,
			.btn-expand {
				display: none;
			}

			p {

				transition: none;
				max-height: initial;

				font-size: 0.85em;
				margin: 1.2em 0;

			}

			> p:first-of-type {
				margin: 0.75em 0;
			}

			blockquote {

				p:first-of-type {
					max-height: initial;
				}

				p {
					max-height: initial;
					font-size: 1em;
					margin: 1em 0;
				}
			}

			h1 {
				font-size: 1.2em;
				margin: 1em 0;
				line-height: 1.5;
			}

			a.collection {
				font-size: 1.2em;
			}

		}

		.btn-close {
			visibility: visible;
		}

	}

	@media #{$mq-medium} {
		#content {
			width: 33%;
		}
	}

}
